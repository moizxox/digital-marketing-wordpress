name: ğŸš€ Deploy Theme to DreamHost via SFTP

on:
  push:
    branches:
      - main # ğŸŒ¿ Trigger only on main branch

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ Checkout code from GitHub
        uses: actions/checkout@v3

      - name: ğŸ“¦ Prepare deployment
        run: echo "Starting SFTP deployment to DreamHost..."

      - name: ğŸ” Secure Upload via SFTP
        uses: appleboy/scp-action@v1
        with:
          host: ${{ secrets.HOST }} # ğŸŒ Your DreamHost server
          username: ${{ secrets.USERNAME }} # ğŸ‘¤ FTP/SFTP username
          password: ${{ secrets.SFTP_PASSWORD }} # ğŸ”‘ Stored in GitHub secrets
          port: 22 # ğŸšª SFTP port
          source: "./*" # ğŸ“‚ All files in root
          target: "/home/dh_5egysr/digitalmarketingsupermarket.com/wp-content/themes/digital-marketing-wordpress/" # ğŸ¯ Theme path on server

      - name: âœ… Deployment finished
        run: echo "ğŸ‰ Theme deployed successfully to DreamHost!"
